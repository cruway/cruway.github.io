【DB勉強内容は今後整理してアップロードする予定】

データベースが大容量に変わることで我々はいつも性能について悩んでいる。
これは多くのデータの中で我々が望むデータを抽出することが思ったより優しくないからだ。

こんな現象はデータが増加したら増加するほどもっと性能的に厳しくなるでしょ。
それで大容量データで我々が望む少なくて効率的にデータを抽出するためにインデックスを利用することである。

普通、インデックスは結合カラムインデックス及び単一カラムインデックスに構成されている。
さて、我々がどんな形のインデックスを選択しなければならなのか？

結論から言うと、ほとんどSQLでは結合カラムインデックスを選んだほうが良い。
これからその理由について調べよう。


SQL性能は処理範囲により、変わる。

SQLの性能は何によって変わるか？色々な要素により、SQL性能が変わることだ。
SQL性能は次の3つ項目で変わる。

・処理範囲の量
・ランダムアクセスの量
・整列の量

そうしたら処理範囲が少ないということは何を意味するのか？
処理範囲が少ないという言葉はアクセスをするデータ量が少ないことを意味する。

次の例を確認しよう

SELECT カード番号、使用額
FROM 取引内訳
WHERE 取引日付 = '200803'
AND 使用区分 = '正常'

ここでインデックスに関する処理範囲を確認しよう。
さて、上のSQLで生成するインデックスの種類は?

・取引日付インデックス
・使用区分インデックス
・取引日付 + 使用区分 インデックス
・使用区分 + 取引日付 インデックス

取引日付インデックス
取引日付インデックスを利用することで処理範囲は取引日付カラムによってのみ減少する。
よって、取引日付カラムの値が'200803'のデータすべてがアクセスをする。
アクセスデータに対して使用区分カラムの値が'正常'のデータだけ抽出できる。
結局、取引日付カラムによってのみ処理範囲が減少して、使用区分カラムによっては処理範囲が減少しなくなる。

使用区分インデックス
使用区分カラムでインデックスを生成すると使用区分カラムの値が'正常'のすべてのデータがアクセスする。
取引日付カラムの値は処理範囲を減少するためのなんお役割を実行しなくなる。
結局、使用区分カラムでインデックスを生成すると使用区分カラムの値だけで処理範囲が減少する。

取引日付 + 使用区分インデックス
該当のインデックスは取引日付カラムの値が'200703'のデータの中で使用区分カラムの値が'正常'になったデータだけアクセスする。
取引日付 + 使用区分インデックスを利用する瞬間処理範囲は取引日付カラムによって減少し、減少になった処理範囲で使用区分カラムの
値が'正常'のデータだけアクセスする。
取引日付カラムと使用区分カラムによって処理範囲が減少する。よって、先話した単一カラムインデックスにより処理範囲がもっと多く
減少して性能的に向上できる。

